(self.modernJsonp=self.modernJsonp||[]).push([["8419"],{646811:function(e,t,o){o.r(t),o.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCommentButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"CommentsPopover_pin"}],type:"Pin",abstractKey:null};n.hash="526d11c356c26ad0b89c7990a8828b3a";let l=n},391728:function(e,t,o){o.r(t),o.d(t,{default:()=>b});var n,l=o(686659),i=o(667294);o(422578);var s=o(391995),r=o(166988),a=o(230201),c=o(183e3),d=o(24246),m=o(507006),u=o(935833),p=o(113759),h=o(49254),g=o(9065),f=o(785893);let v=(0,g.Z)(()=>o.e("30233").then(o.bind(o,728238)),void 0,e=>728238,"CommentsPopover",e=>["30233"]),C=(void 0!==n||(n=o(646811)).hash&&"526d11c356c26ad0b89c7990a8828b3a"!==n.hash&&console.error("The definition of 'CloseupCommentButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function b({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,isEligibleForAggregatedComments:o,pinKey:n,shouldShowCommentCount:g,totalCommentCount:b,viewParameter:w,viewType:_,scrollContainerRef:x}){(0,i.useEffect)(()=>{(0,l.Z)("CloseupCommentButton","/app/common/react/components/auth-desktop-web-closeup/CloseupActionBar/CloseupCommentButton.tsx")},[]);let y=(0,d.Z)(),P=(0,h.t)(),B=(0,c.Z)(C,n),E=(0,r.Z)({showProductDetailPage:!!B.isEligibleForPdp}),{isCommentThreadExpanded:T,setIsCommentThreadExpanded:I,setIsCommentComposerFocused:k}=(0,p.x4)(),{logContextEvent:R}=(0,a.u)(),j=(0,i.useRef)(null),[D,F]=(0,i.useState)(!1),L=t&&T;(0,i.useEffect)(()=>{if(!E||!x)return;let e=document.getElementById("canonical-card");if(!e)return;let t=new IntersectionObserver(e=>{let t=e[0];t&&F(t.isIntersecting)},{root:x,threshold:0});return t.observe(e),setTimeout(()=>{let o=t.takeRecords();if(o.length>0&&o[0])F(o[0].isIntersecting);else{let t=x.getBoundingClientRect(),o=e.getBoundingClientRect();F(o.top>=t.top&&o.top<=t.bottom)}},100),()=>{t.disconnect()}},[E,x]);let Z=y.bt("댓글", "Comments", "Closeup.Comment.Icon", undefined, true),S=t=>{R({component:13464,element:2,event_type:10554,view_parameter:w,view_type:_}),(0,u.tj)("dweb.closeup_comment_button.community_view_intent",{tags:{experimentGroup:e?"improved_dropdown":"popover",clickSource:t}})},z=t=>{let o=document.getElementById("canonical-card"),n=document.querySelector('[data-test-id="canonical-card-tap-area"]');if(!o)return;if(E&&x){let l=x.getBoundingClientRect(),i=o.getBoundingClientRect().top-l.top,s=x.scrollTop+i-P,r=null,a=()=>{r&&clearTimeout(r),r=setTimeout(()=>{e&&(I?.(!0),S(t)),n&&n.focus(),x.removeEventListener("scroll",a)},100)};x.addEventListener("scroll",a,{passive:!0}),a(),x.scrollTo({top:s,behavior:"smooth"});return}let l=o.getBoundingClientRect().top+window.scrollY-P,i=null,s=()=>{i&&clearTimeout(i),i=setTimeout(()=>{e&&(I?.(!0),S(t)),n&&n.focus(),window.removeEventListener("scroll",s)},100)};window.addEventListener("scroll",s,{passive:!0}),s(),window.scrollTo({top:l,behavior:"smooth"})},K=e=>{if(t)T?I?.(!1):(I?.(!0),S(e));else if(E){let t=b>0;if(!D)return void z(e);T||!t||I?.(!0),S(e),k(!0)}else z(e)};return(0,f.jsxs)(s.xu,{role:"listitem",children:[L&&(0,f.jsx)(v,{anchorRef:j,pinKey:B,setIsOpen:I,viewParameter:w}),(0,f.jsxs)(s.kC,{alignItems:"center",direction:"row",children:[(0,f.jsx)(s.hU,{ref:j,accessibilityLabel:Z,disabled:!o||!!B.commentsDisabled,icon:"speech",onClick:()=>K("icon"),selected:L,size:"lg",tooltip:{text:Z}}),g&&(0,f.jsx)(s.iP,{disabled:!o||!!B.commentsDisabled,onTap:()=>K("count"),children:(0,f.jsx)(s.xe,{weight:"bold",children:(0,f.jsx)(m.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:b})})})]})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupCommentButton.ko_KR-93e7bb65b963d969.mjs.map