(self.modernJsonp=self.modernJsonp||[]).push([["55759"],{107056:function(e,n,t){t.r(n),t.d(n,{default:()=>A});var o=t(667294),i=t(312048),a=t(391995),r=t(550368),s=t(664659),l=t(996079),d=t(166988),c=t(77957),u=t(104999),p=t(746868),m=t(470205),h=t(935059),x=t(507006),y=t(501010),g=t(518596),C=t(774838),v=t(341687),f=t(200619),P=t(601871),w=t(15392),b=t(113759),j=t(632492),S=t(510755),_=t(504727),k=t(9065),T=t(785893);let D=(0,k.Z)(()=>Promise.all([t.e("25418"),t.e("19838"),t.e("63529"),t.e("64701")]).then(t.bind(t,53867)),void 0,e=>53867,"SaveAffordance",e=>["25418","19838","63529","64701"]),Z=(0,k.Z)(()=>t.e("73301").then(t.bind(t,569369)),void 0,e=>569369,"PostDownloadUpsellPopover",e=>["73301"]),B=(0,k.Z)(()=>Promise.resolve().then(t.bind(t,53347)),void 0,e=>53347,"SecondarySendButtonCommon",e=>[]),I=(0,k.Z)(()=>Promise.all([t.e("25418"),t.e("96415")]).then(t.bind(t,872901)),void 0,e=>872901,"ReactionPickerContainer",e=>["25418","96415"]),L=(0,k.Z)(()=>t.e("8419").then(t.bind(t,391728)),void 0,e=>391728,"CloseupCommentButton",e=>["8419"]),R=(0,k.Z)(()=>t.e("12447").then(t.bind(t,683827)),{ssr:!1},e=>683827,"SharePinHoverContent",e=>["12447"]),E=({ref:e})=>{e.current&&(clearTimeout(e.current),e.current=null)},A=function({goBack:e,gridDescription:n,isDeletedStoryPin:t,inCommentsImprovedDropdownExp:k,inCommentsPopoverExp:A,isEligibleForAggregatedComments:z,isEligibleForPinReactions:M,isOnSecretBoard:H,onEditSubmit:O,pin:U,viewParameter:F,viewType:K,onSaveButtonClick:W,showRepinOnInitialRender:J,isStoryPin:q,actionBarContainerRef:G,outerPaddingSize:$=w.g9,maxWidth:Y,showLeadPin:N,scrollContainerRef:Q}){let V=(0,i.TH)(),X=(0,f.Z)(),ee=(0,u.Z)(),{checkExperiment:en}=(0,y.Z)(),{showEnabledSaveBehavior:et}=(0,_.Yh)(!0),{imgSrc:eo}=(0,c.G)(),{clientTrackingParams:ei,showCloseupContentRight:ea,closeupWithinMasonryEnabled:er,peekCloseupEnabled:es}=(0,b.x4)(),{viewType:el,viewParameter:ed}=(0,p.SU)(),ec=(0,h.Z)(),eu=(0,P.q6)(ec,U?.pinner?.id,X),ep=(0,d.Z)({showProductDetailPage:!!U.is_eligible_for_pdp}),em=(0,o.useRef)(null),eh=(0,o.useRef)(null),ex=(0,o.useRef)(null),[ey,eg]=(0,o.useState)(!!(0,v.Z)(V.search).share),[eC,ev]=(0,o.useState)(!1),[ef,eP]=(0,o.useState)(!1),[ew,eb]=(0,o.useState)(!1),{shareFromPostDownloadUpsell:ej,setShareFromPostDownloadUpsell:eS,saveToBoardFromPostDownloadUpsell:e_,setSaveToBoardFromPostDownloadUpsell:ek}=(0,r.tS)();ej&&(eg(!0),eS(!1));let eT=(0,o.useCallback)(e=>ev(e),[]),eD=(0,o.useCallback)(()=>eg(!1),[]),eZ=(0,o.useCallback)(()=>eg(e=>!e),[]),eB=(0,o.useCallback)(()=>{E({ref:em}),E({ref:eh})},[]),eI=(0,o.useCallback)(()=>{ee({event_type:101,component:15565}),eB(),eP(!1),eg(!0)},[eB,ee]),eL=(0,o.useCallback)(()=>{eB(),eh.current=setTimeout(()=>{eP(!0)},1e3)},[eB]),eR=(0,o.useCallback)(()=>{eB(),em.current=setTimeout(()=>{eP(!1),em.current=null},300)},[eB]),eE=U.board?.owner?.id||U.pinner?.id,{aggregated_pin_data:eA,comments_disabled:ez,reaction_counts:eM}=U,{isRTL:eH}=(0,C.B)(),eO=er?Y:Y||w.Gg,eU=(0,l.Z)({pinKey:{type:"Legacy",data:U},orbacActingAs:X,viewer:ec}),eF=!!Object.keys(eM||{}).length,eK=eM?(0,g.Ud)(eM):0,eW=eA?.did_it_data?.images_count??0,eJ=(eA?.comment_count??0)+eW,eq=ex.current&&en("ce_dweb_pin_rep_preview_on_share_icon_hover").anyEnabled&&!ey&&ef;(0,o.useEffect)(()=>{if(eq){let e=requestAnimationFrame(()=>eb(!0));return()=>cancelAnimationFrame(e)}eb(!1)},[eq]);let eG=H||t?null:(0,T.jsxs)(m.Z,{name:"CloseupActionBar_SecondarySendButton",children:[(0,T.jsx)(B,{anchorRef:ex,closeupWithinMasonryEnabled:er,controllerOptions:{flyoutDisplayOptions:er?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:ey,loggingOptions:{component:194,element:72,viewParameter:F||ed,viewType:K||el},onFlyoutDismiss:eD,onToggleFlyout:eZ,sendObject:{type:"pin",description:n,id:U.id,imageUrl:eo,ownerId:eE,url:`/pin/${U.id}/`,clientTrackingParams:ei}},experienceAnchor:3025,onMouseEnter:eL,onMouseLeave:eR,shouldHideTooltip:!!eq,showSendAnimation:!0}),eq&&(0,T.jsx)(a.mh,{zIndex:j.$8,children:(0,T.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!ew,transition:"opacity 300ms ease-out"}},onMouseEnter:eL,onMouseLeave:eR,children:(0,T.jsx)(a.J2,{anchor:ex.current,idealDirection:"down",offset:4,onDismiss:()=>{},size:"flexible",children:(0,T.jsx)(a.iP,{onTap:eI,children:(0,T.jsx)(m.Z,{name:"CloseupActionBar_SharePinHoverContent",children:(0,T.jsx)(R,{pin:U})})})})})})]}),e$=(0,T.jsx)(a.xu,{alignItems:"center",color:er?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eO,role:"list",rounding:200,children:(0,T.jsxs)(a.kC,{alignItems:"stretch",gap:2*!!er,justifyContent:"start",children:[!eu&&!!M&&(0,T.jsx)(m.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,T.jsxs)(a.xu,{alignItems:"center",display:"flex",marginEnd:2*!!eF,role:"listitem",children:[(0,T.jsx)(I,{clientTrackingParams:ei,handleReactionTrayHover:eT,idealDirection:er?"down":void 0,pinId:U.id,reactionByMe:U.reaction_by_me,showTooltip:!0,viewParameter:F,viewType:K}),(0,T.jsx)(a.xe,{dataTestId:"reactions-count",weight:"bold",children:(0,T.jsx)(x.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:eK})})]})}),er&&!(k&&ez)&&(0,T.jsx)(L,{inCommentsImprovedDropdownExp:!!k,inCommentsPopoverExp:!!A,isEligibleForAggregatedComments:!!z,pinKey:{type:"Legacy",data:U},scrollContainerRef:Q,shouldShowCommentCount:!ez&&!!eJ&&(!!A||!!k),totalCommentCount:eJ,viewParameter:F,viewType:K}),(0,T.jsx)(a.xu,{role:"listitem",children:eG}),(0,T.jsx)(a.xu,{"data-test-id":"closeup-more-options",role:"listitem",children:(0,T.jsx)(s.Z,{carouselSlotCurrentIndex:U&&U.carousel_data&&U.carousel_data.index,clientTrackingParams:ei,closeupWithinMasonryEnabled:er,goBack:e,isReactionTrayOpen:eC,onEditSubmit:O,pinKey:{type:"Legacy",data:U},showEditPin:!t&&eU,viewParameter:F,viewType:K})})]})}),eY=er?void 0:$,eN=(0,T.jsxs)(a.xu,{ref:G,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:$/2,paddingRight:eH?void 0:eY,paddingLeft:eH?eY:void 0,paddingBottom:er?$/2:void 0,borderRadius:q?"0px 32px 32px 32px":ea?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:er?0:q?-5:0,width:er?"100%":void 0,children:[(0,T.jsx)(a.xu,{"data-test-id":"closeupActionBar",marginStart:ep?-3:void 0,children:(0,T.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"between",children:[e$,(0,T.jsx)(a.kC,{alignItems:"center",gap:2,children:!t&&!eu&&(0,T.jsx)(a.xu,{marginStart:3*!er,children:(0,T.jsx)(D,{boardCount:ec.isAuth?ec.boardCount:0,clientTrackingParams:ei,onClickCallback:W,pinKey:{type:"Legacy",data:U},saveToBoardFromPostDownloadUpsell:e_,setSaveToBoardFromPostDownloadUpsell:ek,showEnabledSaveBehavior:et,showRepinOnInitialRender:J,variant:"closeup",viewParameter:F,viewType:K})})})]})}),(0,T.jsx)(Z,{})]});if(N||er)return eN;let eQ=q&&!es?S.cI+4:S.hu;return es&&(eQ=0),(0,T.jsx)(a.Le,{top:eQ,zIndex:j.mS,children:eN})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-b8f41f66e61c1460.mjs.map